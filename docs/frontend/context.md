# Контекст на фронте (коротко)

Эта страница показывает, как фронт работает с контекстом (membership/master/brand/location).

## Авторизация и контекст

1. Пользователь логинится → получает `accessToken` (без контекста).
2. Фронт запрашивает список `GET /auth/v1/memberships` и показывает варианты.
3. Пользователь выбирает — фронт вызывает `POST /auth/v1/context/switch` с `{ membershipId, brandId?, locationId? }`.
4. Бэкенд возвращает новый `accessToken` — в нём клеймы контекста.

## Заголовки и перехватчики

- Все защищённые запросы отправляются с заголовком `Authorization: Bearer <accessToken>`.
- Дополнительно фронт ставит `X-Membership-Id` (для трассировки и простых проверок).
- В dev-профиле сервер поддерживает `X-Master-Id` — использовать только локально.

## E2E‑smoke (моки)

- Тест `Front/tests/AuthContextE2ESmoke.spec.js` полностью мокает авторизацию и адаптер запросов.
- Проверяет, что при выборе membership A/B запросы уходят с корректным `X-Membership-Id`, а данные на экране
  соответствуют выбранному контексту.
